<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Fake Roblox FPS RPG</title>

<style>
html,body{margin:0;padding:0;background:#000;color:#fff;overflow:hidden;font-family:system-ui}
canvas{display:block}

/* HUD */
#hud{position:fixed;top:10px;left:10px;font-size:14px;z-index:10}

/* Gun */
#gun{
  position:fixed;
  bottom:-10px;
  right:20px;
  width:180px;
  height:120px;
  background:linear-gradient(#666,#111);
  border-radius:10px;
  transform-origin:right center;
}
#gun.kick{animation:kick .08s linear}
@keyframes kick{
  0%{transform:translate(0,0)}
  50%{transform:translate(-22px,-10px)}
  100%{transform:translate(0,0)}
}

/* Crosshair */
#crosshair{
  position:fixed;
  top:50%;
  left:50%;
  width:14px;
  height:14px;
  margin:-7px;
  border:2px solid white;
  border-radius:50%;
  z-index:10;
}

/* Mobile controls */
#joystick{
  position:fixed;
  bottom:40px;
  left:40px;
  width:120px;
  height:120px;
  border-radius:50%;
  background:rgba(255,255,255,.1);
  touch-action:none;
}
#stick{
  position:absolute;
  top:40px;
  left:40px;
  width:40px;
  height:40px;
  border-radius:50%;
  background:rgba(255,255,255,.4);
}

#shootBtn{
  position:fixed;
  bottom:60px;
  right:40px;
  width:90px;
  height:90px;
  border-radius:50%;
  background:rgba(255,0,0,.4);
  font-size:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  user-select:none;
}
</style>
</head>

<body>

<div id="hud">
‚ù§Ô∏è <span id="hp">100</span><br>
üî´ <span id="ammo">12</span><br>
‚ò†Ô∏è <span id="kills">0</span>
</div>

<div id="crosshair"></div>
<div id="gun"></div>

<div id="joystick"><div id="stick"></div></div>
<div id="shootBtn">SHOOT</div>

<canvas id="game"></canvas>

<script>
/* ===== CORE ===== */
const canvas=document.getElementById("game"),ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);

const hpEl=hp,ammoEl=ammo,killsEl=kills,gun=document.getElementById("gun");

/* ===== PLAYER ===== */
let player={x:0,z:0,hp:100,kills:0,recoil:0};

/* ===== WEAPON ===== */
let ammo=12;

/* ===== WORLD ===== */
let bots=[];
function spawnBot(){
  bots.push({
    x:(Math.random()-.5)*300,
    z:600+Math.random()*600,
    hp:40
  });
}
for(let i=0;i<6;i++)spawnBot();

/* ===== SHOOT ===== */
function shoot(){
  if(ammo<=0){ammo=12;return}
  ammo--;
  gun.classList.remove("kick");void gun.offsetWidth;gun.classList.add("kick");
  player.recoil=15;

  bots.forEach((b,i)=>{
    if(Math.abs(b.x)<40 && b.z<500){
      b.hp-=30;
      if(b.hp<=0){
        bots.splice(i,1);
        spawnBot();
        player.kills++;
      }
    }
  });
  updateHUD();
}

/* ===== HUD ===== */
function updateHUD(){
  hpEl.textContent=player.hp;
  ammoEl.textContent=ammo;
  killsEl.textContent=player.kills;
}

/* ===== JOYSTICK ===== */
let moveX=0,moveZ=0;
const stick=document.getElementById("stick");
const joy=document.getElementById("joystick");

joy.addEventListener("touchmove",e=>{
  const r=60;
  const t=e.touches[0];
  const rect=joy.getBoundingClientRect();
  let dx=t.clientX-(rect.left+r);
  let dy=t.clientY-(rect.top+r);
  const dist=Math.hypot(dx,dy);
  if(dist>r){dx*=r/dist;dy*=r/dist}
  stick.style.transform=`translate(${dx}px,${dy}px)`;
  moveX=dx/r;
  moveZ=dy/r;
});

joy.addEventListener("touchend",()=>{
  stick.style.transform="translate(0,0)";
  moveX=moveZ=0;
});

/* ===== SHOOT BUTTON ===== */
shootBtn.addEventListener("touchstart",shoot);
addEventListener("click",shoot);

/* ===== LOOP ===== */
function loop(){
  ctx.fillStyle="#111";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // movement
  player.x+=moveX*4;
  player.z+=moveZ*4;

  ctx.save();
  ctx.translate(canvas.width/2,canvas.height/2-player.recoil);

  bots.forEach(b=>{
    b.z-=2;
    const scale=400/b.z;
    const x=b.x*scale;
    const size=40*scale;
    ctx.fillStyle="red";
    ctx.fillRect(x-size/2,-size/2,size,size);
    if(b.z<100)b.z=800;
  });

  ctx.restore();

  player.recoil*=0.85;
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
